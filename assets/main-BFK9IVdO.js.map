{"version":3,"file":"main-BFK9IVdO.js","sources":["../../src/js/render-functions.js","../../src/main.js"],"sourcesContent":["export const createImageMarkup = images => {\n    return images\n      .map(\n        img => `\n          <a href=\"${img.largeImageURL}\">\n            <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" loading=\"lazy\" />\n          </a>\n        `\n      )\n      .join('');\n  };\n  \n  export const updateGallery = (gallery, markup) => {\n    gallery.insertAdjacentHTML('beforeend', markup);\n  };\n  \n  export const clearGallery = gallery => {\n    gallery.innerHTML = '';\n  };\n  ","\nimport { createImageMarkup, updateGallery, clearGallery } from './js/render-functions.js';\n\nconst searchForm = document.querySelector('#search-form');\nconst gallery = document.querySelector('#gallery');\nconst loadMoreBtn = document.querySelector('#load-more');\nconst loader = document.querySelector('#loader');\n\nlet currentQuery = '';\nlet currentPage = 1;\nlet totalHits = 0;\n\nconst lightbox = new SimpleLightbox('#gallery a', { captionsData: 'alt', captionDelay: 250 });\n\nconst handleSearch = async e => {\n  e.preventDefault();\n  currentQuery = e.target.query.value.trim();\n  if (!currentQuery) return;\n\n  currentPage = 1;\n  clearGallery(gallery);\n  loadMoreBtn.hidden = true;\n\n  try {\n    loader.hidden = false;\n    const data = await fetchImages(currentQuery, currentPage);\n    totalHits = data.totalHits;\n\n    if (data.hits.length > 0) {\n      const markup = createImageMarkup(data.hits);\n      updateGallery(gallery, markup);\n      lightbox.refresh();\n      loadMoreBtn.hidden = data.hits.length < 15;\n    } else {\n      alert('No images found.');\n    }\n  } catch (error) {\n    console.error(error);\n  } finally {\n    loader.hidden = true;\n  }\n};\n\nconst handleLoadMore = async () => {\n  currentPage += 1;\n\n  try {\n    loader.hidden = false;\n    const data = await fetchImages(currentQuery, currentPage);\n\n    const markup = createImageMarkup(data.hits);\n    updateGallery(gallery, markup);\n    lightbox.refresh();\n\n    if (currentPage * 15 >= totalHits) {\n      loadMoreBtn.hidden = true;\n      alert(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } catch (error) {\n    console.error(error);\n  } finally {\n    loader.hidden = true;\n  }\n};\n\nsearchForm.addEventListener('submit', handleSearch);\nloadMoreBtn.addEventListener('click', handleLoadMore);\n"],"names":["createImageMarkup","images","img","updateGallery","gallery","markup","clearGallery","searchForm","loadMoreBtn","loader","currentQuery","currentPage","totalHits","lightbox","handleSearch","e","data","error","handleLoadMore"],"mappings":"ssBAAO,MAAMA,EAAoBC,GACtBA,EACJ,IACCC,GAAO;AAAA,qBACMA,EAAI,aAAa;AAAA,wBACdA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA,SAG1D,EACO,KAAK,EAAE,EAGCC,EAAgB,CAACC,EAASC,IAAW,CAChDD,EAAQ,mBAAmB,YAAaC,CAAM,CAC/C,EAEYC,EAAeF,GAAW,CACrCA,EAAQ,UAAY,EACrB,ECfGG,EAAa,SAAS,cAAc,cAAc,EAClDH,EAAU,SAAS,cAAc,UAAU,EAC3CI,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIC,EAAe,GACfC,EAAc,EACdC,EAAY,EAEhB,MAAMC,EAAW,IAAI,eAAe,aAAc,CAAE,aAAc,MAAO,aAAc,IAAK,EAEtFC,EAAe,MAAMC,GAAK,CAG9B,GAFAA,EAAE,eAAgB,EAClBL,EAAeK,EAAE,OAAO,MAAM,MAAM,KAAM,EACtC,EAACL,EAEL,CAAAC,EAAc,EACdL,EAAaF,CAAO,EACpBI,EAAY,OAAS,GAErB,GAAI,CACFC,EAAO,OAAS,GAChB,MAAMO,EAAO,MAAM,YAAYN,EAAcC,CAAW,EAGxD,GAFAC,EAAYI,EAAK,UAEbA,EAAK,KAAK,OAAS,EAAG,CACxB,MAAMX,EAASL,EAAkBgB,EAAK,IAAI,EAC1Cb,EAAcC,EAASC,CAAM,EAC7BQ,EAAS,QAAS,EAClBL,EAAY,OAASQ,EAAK,KAAK,OAAS,EAC9C,MACM,MAAM,kBAAkB,CAE3B,OAAQC,EAAO,CACd,QAAQ,MAAMA,CAAK,CACvB,QAAY,CACRR,EAAO,OAAS,EACpB,EACA,EAEMS,EAAiB,SAAY,CACjCP,GAAe,EAEf,GAAI,CACFF,EAAO,OAAS,GAChB,MAAMO,EAAO,MAAM,YAAYN,EAAcC,CAAW,EAElDN,EAASL,EAAkBgB,EAAK,IAAI,EAC1Cb,EAAcC,EAASC,CAAM,EAC7BQ,EAAS,QAAS,EAEdF,EAAc,IAAMC,IACtBJ,EAAY,OAAS,GACrB,MAAM,4DAA4D,EAErE,OAAQS,EAAO,CACd,QAAQ,MAAMA,CAAK,CACvB,QAAY,CACRR,EAAO,OAAS,EACpB,CACA,EAEAF,EAAW,iBAAiB,SAAUO,CAAY,EAClDN,EAAY,iBAAiB,QAASU,CAAc"}